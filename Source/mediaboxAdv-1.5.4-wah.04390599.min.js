/*
mediaboxAdvanced v1.5.4 - The ultimate extension of Slimbox and Mediabox; an all-media script
updated 2011.2.19
	(c) 2007-2011 John Einselen - http://iaian7.com
based on Slimbox v1.64 - The ultimate lightweight Lightbox clone
	(c) 2007-2008 Christophe Beyls - http://www.digitalia.be

description: The ultimate extension of Slimbox and Mediabox; an all-media script

license: MIT-style

authors:
- John Einselen
- Christophe Beyls
- Contributions from many others

requires:
- core/1.3.2: [Core, Array, String, Number, Function, Object, Event, Browser, Class, Class.Extras, Slick.*, Element.*, FX.*, DOMReady, Swiff]
- Quickie/2.1: '*'

provides: [Mediabox.open, Mediabox.close, Mediabox.recenter, Mediabox.scanPage]
*/
var Mediabox;!function(){function e(){B.setStyles({top:window.getScrollTop(),left:window.getScrollLeft()})}function t(){S=window.getWidth(),k=window.getHeight(),B.setStyles({width:S,height:k})}function o(o){Browser.firefox&&["object",window.ie?"select":"embed"].forEach(function(e){Array.forEach($$(e),function(e){o&&(e._mediabox=e.style.visibility),e.style.visibility=o?"hidden":e._mediabox})}),B.style.display=o?"":"none";var l=o?"addEvent":"removeEvent";(Browser.Platform.ios||Browser.ie6)&&window[l]("scroll",e),window[l]("resize",t),w.keyboard&&document[l]("keydown",i)
}function i(e){if(w.keyboardAlpha)switch(e.code){case 27:case 88:case 67:m();break;case 37:case 80:l();break;case 39:case 78:a()}else switch(e.code){case 27:m();break;case 37:l();break;case 39:a()}return w.keyboardStop?!1:void 0}function l(){return r(u)}function a(){return r(f)}function r(e){return e>=0&&(I.set("html",""),I.setStyle("display","none"),h=e,u=(h||!w.loop?h:p.length)-1,f=h+1,f==p.length&&(f=w.loop?0:-1),d(),j.className="mbLoading",C&&"inline"==X&&!w.inlineClone&&C.adopt(I.getChildren()),p[e][2]||(p[e][2]=""),H=p[e][2].split(" "),L=H.length,L>1?(M=H[L-2].match("%")?.01*window.getWidth()*H[L-2].replace("%",""):H[L-2],q=H[L-1].match("%")?.01*window.getHeight()*H[L-1].replace("%",""):H[L-1]):(M="",q=""),O=p[e][0],T=p[h][1].split("::"),O.match(/quietube\.com/i)?(R=O.split("v.php/"),O=R[1]):O.match(/\/\/yfrog/i)&&(X=O.substring(O.length-1),X.match(/b|g|j|p|t/i)&&(X="image"),"s"==X&&(X="flash"),X.match(/f|z/i)&&(X="video"),O+=":iphone"),O.match(/\.gif|\.jpg|\.jpeg|\.png|twitpic\.com/i)||"image"==X?(X="img",O=O.replace(/twitpic\.com/i,"twitpic.com/show/full"),C=new Image,C.onload=c,C.src=O):O.match(/\.flv|\.mp4/i)||"video"==X?(X="obj",M=M||w.defaultWidth,q=q||w.defaultHeight,C=new Swiff(""+w.playerpath+"?mediaURL="+O+"&allowSmoothing=true&autoPlay="+w.autoplay+"&buffer=6&showTimecode="+w.showTimecode+"&loop="+w.medialoop+"&controlColor="+w.controlColor+"&controlBackColor="+w.controlBackColor+"&playerBackColor="+w.playerBackColor+"&defaultVolume="+w.volume+"&scaleIfFullScreen=true&showScalingButton=true&crop=false",{id:"mbVideo",width:M,height:q,params:{wmode:w.wmodeNB,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/\.mp3|\.aac|tweetmic\.com|tmic\.fm/i)||"audio"==X?(X="obj",M=M||w.defaultWidth,q=q||"17",O.match(/tweetmic\.com|tmic\.fm/i)&&(O=O.split("/"),O[4]=O[4]||O[3],O="http://media4.fjarnet.net/tweet/tweetmicapp-"+O[4]+".mp3"),C=new Swiff(""+w.playerpath+"?mediaURL="+O+"&allowSmoothing=true&autoPlay="+w.autoplay+"&buffer=6&showTimecode="+w.showTimecode+"&loop="+w.medialoop+"&controlColor="+w.controlColor+"&controlBackColor="+w.controlBackColor+"&defaultVolume="+w.volume+"&scaleIfFullScreen=true&showScalingButton=true&crop=false",{id:"mbAudio",width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/\.swf/i)||"flash"==X?(X="obj",M=M||w.defaultWidth,q=q||w.defaultHeight,C=new Swiff(O,{id:"mbFlash",width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/\.mov|\.m4v|\.m4a|\.aiff|\.avi|\.caf|\.dv|\.mid|\.m3u|\.mp3|\.mp2|\.mp4|\.qtz/i)||"qt"==X?(X="qt",M=M||w.defaultWidth,q=parseInt(q,10)+16||w.defaultHeight,C=new Quickie(O,{id:"MediaboxQT",width:M,height:q,attributes:{controller:w.controller,autoplay:w.autoplay,volume:w.volume,loop:w.medialoop,bgcolor:w.bgcolor}}),c()):O.match(/blip\.tv/i)?(X="obj",M=M||"640",q=q||"390",C=new Swiff(O,{src:O,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/break\.com/i)?(X="obj",M=M||"464",q=q||"376",J=O.match(/\d{6}/g),C=new Swiff("http://embed.break.com/"+J,{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/dailymotion\.com/i)?(X="obj",M=M||"480",q=q||"381",C=new Swiff(O,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/facebook\.com/i)?(X="obj",M=M||"320",q=q||"240",R=O.split("v="),R=R[1].split("&"),J=R[0],C=new Swiff("http://www.facebook.com/v/"+J,{movie:"http://www.facebook.com/v/"+J,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/flickr\.com(?!.+\/show\/)/i)?(X="obj",M=M||"500",q=q||"375",R=O.split("/"),J=R[5],C=new Swiff("http://www.flickr.com/apps/video/stewart.swf",{id:J,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",width:M,height:q,params:{flashvars:"photo_id="+J+"&amp;show_info_box="+w.flInfo,wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/gametrailers\.com/i)?(X="obj",M=M||"480",q=q||"392",J=O.match(/\d{5}/g),C=new Swiff("http://www.gametrailers.com/remote_wrap.php?mid="+J,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/google\.com\/videoplay/i)?(X="obj",M=M||"400",q=q||"326",R=O.split("="),J=R[1],C=new Swiff("http://video.google.com/googleplayer.swf?docId="+J+"&autoplay="+w.autoplayNum,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/megavideo\.com/i)?(X="obj",M=M||"640",q=q||"360",R=O.split("="),J=R[1],C=new Swiff("http://wwwstatic.megavideo.com/mv_player.swf?v="+J,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/metacafe\.com\/watch/i)?(X="obj",M=M||"400",q=q||"345",R=O.split("/"),J=R[4],C=new Swiff("http://www.metacafe.com/fplayer/"+J+"/.swf?playerVars=autoPlay="+w.autoplayYes,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/vids\.myspace\.com/i)?(X="obj",M=M||"425",q=q||"360",C=new Swiff(O,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/revver\.com/i)?(X="obj",M=M||"480",q=q||"392",R=O.split("/"),J=R[4],C=new Swiff("http://flash.revver.com/player/1.0/player.swf?mediaId="+J+"&affiliateId="+w.revverID+"&allowFullScreen="+w.revverFullscreen+"&autoStart="+w.autoplay+"&backColor=#"+w.revverBack+"&frontColor=#"+w.revverFront+"&gradColor=#"+w.revverGrad+"&shareUrl=revver",{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/rutube\.ru/i)?(X="obj",M=M||"470",q=q||"353",R=O.split("="),J=R[1],C=new Swiff("http://video.rutube.ru/"+J,{movie:"http://video.rutube.ru/"+J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/tudou\.com/i)?(X="obj",M=M||"400",q=q||"340",R=O.split("/"),J=R[5],C=new Swiff("http://www.tudou.com/v/"+J,{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/twitcam\.com/i)?(X="obj",M=M||"320",q=q||"265",R=O.split("/"),J=R[3],C=new Swiff("http://static.livestream.com/chromelessPlayer/wrappers/TwitcamPlayer.swf?hash="+J,{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/twitvid\.com/i)?(X="obj",M=M||"600",q=q||"338",R=O.split("/"),J=R[3],C=new Swiff("http://www.twitvid.com/player/"+J,{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/ustream\.tv/i)?(X="obj",M=M||"400",q=q||"326",C=new Swiff(O+"&amp;viewcount="+w.usViewers+"&amp;autoplay="+w.autoplay,{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/youku\.com/i)?(X="obj",M=M||"480",q=q||"400",R=O.split("id_"),J=R[1],C=new Swiff("http://player.youku.com/player.php/sid/"+J+"=/v.swf",{width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/youtube\.com\/watch/i)?(R=O.split("v="),w.html5?(X="url",M=M||"640",q=q||"385",J="mediaId_"+(new Date).getTime(),C=new Element("iframe",{src:"http://www.youtube.com/embed/"+R[1],id:J,width:M,height:q,frameborder:0}),c()):(X="obj",J=R[1],M=M||"480",q=q||"385",C=new Swiff("http://www.youtube.com/v/"+J+"&autoplay="+w.autoplayNum+"&fs="+w.fullscreenNum+"&border="+w.ytBorder+"&color1=0x"+w.ytColor1+"&color2=0x"+w.ytColor2+"&rel="+w.ytRel+"&showinfo="+w.ytInfo+"&showsearch="+w.ytSearch,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c())):O.match(/youtube\.com\/view/i)?(X="obj",R=O.split("p="),J=R[1],M=M||"480",q=q||"385",C=new Swiff("http://www.youtube.com/p/"+J+"&autoplay="+w.autoplayNum+"&fs="+w.fullscreenNum+"&border="+w.ytBorder+"&color1=0x"+w.ytColor1+"&color2=0x"+w.ytColor2+"&rel="+w.ytRel+"&showinfo="+w.ytInfo+"&showsearch="+w.ytSearch,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/veoh\.com/i)?(X="obj",M=M||"410",q=q||"341",O=O.replace("%3D","/"),R=O.split("watch/"),J=R[1],C=new Swiff("http://www.veoh.com/static/swf/webplayer/WebPlayer.swf?version=AFrontend.5.5.2.1001&permalinkId="+J+"&player=videodetailsembedded&videoAutoPlay="+w.AutoplayNum+"&id=anonymous",{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c()):O.match(/viddler\.com/i)?(X="obj",M=M||"437",q=q||"370",R=O.split("/"),J=R[4],C=new Swiff(O,{id:"viddler_"+J,movie:O,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen,id:"viddler_"+J,movie:O}}),c()):O.match(/vimeo\.com/i)?(M=M||"640",q=q||"360",R=O.split("/"),J=R[3],w.html5?(X="url",J="mediaId_"+(new Date).getTime(),C=new Element("iframe",{src:"http://player.vimeo.com/video/"+R[3]+"?portrait="+w.vmPortrait,id:J,width:M,height:q,frameborder:0}),c()):(X="obj",C=new Swiff("http://www.vimeo.com/moogaloop.swf?clip_id="+J+"&amp;server=www.vimeo.com&amp;fullscreen="+w.fullscreenNum+"&amp;autoplay="+w.autoplayNum+"&amp;show_title="+w.vmTitle+"&amp;show_byline="+w.vmByline+"&amp;show_portrait="+w.vmPortrait+"&amp;color="+w.vmColor,{id:J,width:M,height:q,params:{wmode:w.wmode,bgcolor:w.bgcolor,allowscriptaccess:w.scriptaccess,allowfullscreen:w.fullscreen}}),c())):O.match(/\#mb_/i)?(X="inline",M=M||w.defaultWidth,q=q||w.defaultHeight,URLsplit=O.split("#"),C=document.id(URLsplit[1]),c()):(X="url",M=M||w.defaultWidth,q=q||w.defaultHeight,J="mediaId_"+(new Date).getTime(),C=new Element("iframe",{src:O,id:J,width:M,height:q,frameborder:0}),c())),!1
}function c(){"img"==X?I.addEvent("click",a):I.removeEvent("click",a),"img"==X?(M=C.width,q=C.height,w.imgBackground?I.setStyles({backgroundImage:"url("+O+")",display:""}):(q>=k-(Q+Q)&&q/k>=M/S?(q=k-(Q+Q),M=C.width=parseInt(q/C.height*M,10),C.height=q):M>=S-(V+V+U+U)&&M/S>q/k&&(M=S-(V+V+U+U),q=C.height=parseInt(M/C.width*q,10),C.width=M),M+V+V+U+U>S-32&&(M-=64,q=C.height=parseInt(M/C.width*q,10),C.width=M),Browser.ie&&(C=document.id(C)),w.clickBlock&&C.addEvent("mousedown",function(e){e.stop()}).addEvent("contextmenu",function(e){e.stop()
}),I.setStyles({backgroundImage:"none",display:"none"}),C.inject(I))):"inline"==X?(I.setStyles({backgroundImage:"none",display:""}),w.inlineClone?I.grab(C.get("html")):I.adopt(C.getChildren())):"qt"==X?(I.setStyles({backgroundImage:"none",display:""}),C.inject(I)):"ios"==X||Browser.Platform.ios?(I.setStyles({backgroundImage:"none",display:""}),I.set("html",w.linkText.replace(/\{x\}/gi,O)),M=w.DefaultWidth,q=w.DefaultHeight):"url"==X?(I.setStyles({backgroundImage:"none",display:""}),C.inject(I)):"obj"==X?Browser.Plugins.Flash.version<"8"?(I.setStyles({backgroundImage:"none",display:""}),I.set("html",'<div id="mbError"><b>Error</b><br/>Adobe Flash is either not installed or not up to date, please visit <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" title="Get Flash" target="_new">Adobe.com</a> to download the free player.</div>'),M=w.DefaultWidth,q=w.DefaultHeight):(I.setStyles({backgroundImage:"none",display:""}),C.inject(I)):(I.setStyles({backgroundImage:"none",display:""}),I.set("html",w.flashText),M=w.defaultWidth,q=w.defaultHeight),F.set("html",w.showCaption?T[0]:""),_.set("html",w.showCaption&&T.length>1?T[1]:""),P.set("html",w.showCounter&&p.length>1?w.counterText.replace(/\{x\}/,w.countBack?p.length-h:h+1).replace(/\{y\}/,p.length):""),u>=0&&p[u][0].match(/\.gif|\.jpg|\.jpeg|\.png|twitpic\.com/i)&&(G.src=p[u][0].replace(/twitpic\.com/i,"twitpic.com/show/full")),f>=0&&p[f][0].match(/\.gif|\.jpg|\.jpeg|\.png|twitpic\.com/i)&&(Y.src=p[f][0].replace(/twitpic\.com/i,"twitpic.com/show/full")),u>=0&&(D.style.display=""),f>=0&&(W.style.display=""),I.setStyles({width:M+"px",height:q+"px"}),b=q>=g+g?-g:-(q/2),v=M>=y+y?-y:-(M/2),w.resizeOpening?x.resize.start({width:M+V+V,height:q+Q+Q,marginTop:b-Q,marginLeft:v-V}):(j.setStyles({width:M+V+V,height:q+Q+Q,marginTop:b-Q,marginLeft:v-V}),s())
}function s(){I.setStyle("display","block"),x.media.start(1)}function n(){j.className="",p[h][1].length>0&&x.bottom.start(1)}function d(){C&&("inline"!=X||w.inlineClone||C.adopt(I.getChildren()),C.onload=function(){}),x.resize.cancel(),x.media.cancel().set(0),x.bottom.cancel().set(0),$$(D,W).setStyle("display","none")}function m(){if(h>=0){"inline"!=X||w.inlineClone||C.adopt(I.getChildren()),C.onload=function(){},I.empty();for(var e in x)x[e].cancel();j.setStyle("display","none"),x.overlay.chain(o).start(0)}return!1
}var w,p,h,u,f,g,b,y,v,S,k,x,C,B,j,E,I,N,T,F,_,P,D,W,A,O,H,L,z,M,q,R,V,Q,U,G=new Image,Y=new Image,X="none",J="mediaBox";window.addEvent("domready",function(){document.id(document.body).adopt($$([B=new Element("div",{id:"mbOverlay"}).addEvent("click",m),j=new Element("div",{id:"mbCenter"})]).setStyle("display","none")),j.adopt(A=new Element("a",{id:"mbCloseLink",href:"#"}).addEvent("click",m)),E=new Element("div",{id:"mbContainer"}).inject(j,"inside"),I=new Element("div",{id:"mbMedia"}).inject(E,"inside"),N=new Element("div",{id:"mbBottom"}).inject(E,"inside").adopt(W=new Element("a",{id:"mbNextLink",href:"#"}).addEvent("click",a),D=new Element("a",{id:"mbPrevLink",href:"#"}).addEvent("click",l),F=new Element("div",{id:"mbTitle"}),P=new Element("div",{id:"mbNumber"}),_=new Element("div",{id:"mbCaption"})),x={overlay:new Fx.Tween(B,{property:"opacity",duration:360}).set(0),media:new Fx.Tween(I,{property:"opacity",duration:360,onComplete:n}),bottom:new Fx.Tween(N,{property:"opacity",duration:240}).set(0)}
}),Mediabox={close:function(){m()},recenter:function(){j&&!Browser.Platform.ios&&(y=window.getScrollLeft()+window.getWidth()/2,isNaN(M/2)||j.setStyles({left:y,marginLeft:-(M/2)-V}))},open:function(i,l,a){w={buttonText:["<big>&laquo;</big>","<big>&raquo;</big>","&times;"],counterText:"({x} of {y})",linkText:'<a href="{x}" target="_new">{x}</a><br/>open in a new tab</div>',flashText:'<b>Error</b><br/>Adobe Flash is either not installed or not up to date, please visit <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" title="Get Flash" target="_new">Adobe.com</a> to download the free player.',center:!0,loop:!1,keyboard:!0,keyboardAlpha:!1,keyboardStop:!1,overlayOpacity:.8,resizeOpening:!0,resizeDuration:240,initialWidth:320,initialHeight:180,defaultWidth:640,defaultHeight:360,showCaption:!0,showCounter:!0,countBack:!1,clickBlock:!1,iOShtml:!0,imgBackground:!1,overflow:"auto",inlineClone:!1,html5:"true",scriptaccess:"true",fullscreen:"true",fullscreenNum:"1",autoplay:"true",autoplayNum:"1",autoplayYes:"yes",volume:"100",medialoop:"true",bgcolor:"#000000",wmode:"transparent",playerpath:"files/NonverBlaster.swf",showTimecode:"false",controlColor:"0xFFFFFF",controlBackColor:"0x0000000",playerBackColor:"",wmodeNB:"transparent",controller:"true",flInfo:"true",revverID:"187866",revverFullscreen:"true",revverBack:"000000",revverFront:"ffffff",revverGrad:"000000",usViewers:"true",ytBorder:"0",ytColor1:"000000",ytColor2:"333333",ytRel:"0",ytInfo:"1",ytSearch:"0",vuPlayer:"basic",vmTitle:"1",vmByline:"1",vmPortrait:"1",vmColor:"ffffff"},D.set("html",w.buttonText[0]),W.set("html",w.buttonText[1]),A.set("html",w.buttonText[2]),Browser.firefox2&&(w.overlayOpacity=1,B.className="mbOverlayOpaque"),Browser.Platform.ios&&(w.keyboard=!1,w.resizeOpening=!1,B.className="mbMobile",N.className="mbMobile",e()),Browser.ie6&&(w.resizeOpening=!1,B.className="mbOverlayAbsolute",e()),"string"==typeof i&&(i=[[i,l,a]],l=0),p=i,w.loop=w.loop&&p.length>1,t(),o(!0),g=window.getScrollTop()+window.getHeight()/2,y=window.getScrollLeft()+window.getWidth()/2;
var c=j.getStyle("padding-left").toInt();isNaN(c)&&(c=0);var n=I.getStyle("margin-left").toInt();isNaN(n)&&(n=0);var d=I.getStyle("padding-left").toInt();return isNaN(d)&&(d=0),V=c+n+d,c=j.getStyle("padding-top").toInt(),isNaN(c)&&(c=0),n=I.getStyle("margin-top").toInt(),isNaN(n)&&(n=0),d=I.getStyle("padding-top").toInt(),isNaN(d)&&(d=0),Q=c+n+d,U=A.getStyle("width").toInt(),isNaN(U)&&(U=0),j.setStyles({top:g,left:y,width:w.initialWidth,height:w.initialHeight,marginTop:-(w.initialHeight/2),marginLeft:-(w.initialWidth/2),display:""}),x.resize=new Fx.Morph(j,{duration:w.resizeDuration,onComplete:s}),x.overlay.start(w.overlayOpacity),r(l)
}},Element.implement({mediabox:function(e,t){return $$(this).mediabox(e,t),this}}),Elements.implement({mediabox:function(e,t,o){t=t||function(e){return z=e.rel.split(/[\[\]]/),z=z[1],[e.get("href"),e.title,z]},o=o||function(){return!0};var i=this;return e.clickBlock&&i.addEvent("contextmenu",function(e){this.toString().match(/\.gif|\.jpg|\.jpeg|\.png/i)&&e.stop()}),i.removeEvents("click").addEvent("click",function(){var l=i.filter(o,this),a=[],r=[];return l.each(function(e,t){r.indexOf(e.toString())<0&&(a.include(l[t]),r.include(l[t].toString()))
}),Mediabox.open(a.map(t),r.indexOf(this.toString()),e)}),i}})}(),Browser.Plugins.QuickTime=function(){if(navigator.plugins){for(var e=0,t=navigator.plugins.length;t>e;e++)if(navigator.plugins[e].name.indexOf("QuickTime")>=0)return!0}else{var o;try{o=new ActiveXObject("QuickTime.QuickTime")}catch(i){}if(o)return!0}return!1}(),Mediabox.scanPage=function(){var e=$$("a").filter(function(e){return e.rel&&e.rel.test(/^lightbox/i)});e.mediabox({},null,function(e){var t=this.rel.replace(/[\[\]|]/gi," "),o=t.split(" "),i="\\["+o[1]+"[ \\]]",l=new RegExp(i);
return this==e||this.rel.length>8&&e.rel.match(l)})},window.addEvents({domready:Mediabox.scanPage,resize:Mediabox.recenter});